# jitpack.yml
jdk:
  - openjdk17   # or openjdk21 if your AGP needs Java 21

before_install:
  # Set SDK root
  - export ANDROID_SDK_ROOT="$HOME/android-sdk"
  - export ANDROID_HOME="$ANDROID_SDK_ROOT"
  - mkdir -p "$ANDROID_SDK_ROOT/cmdline-tools"

  # Download Android commandline tools (Linux)
  - curl -sSL -o cmdline-tools.zip https://dl.google.com/android/repository/commandlinetools-linux-11076708_latest.zip
  - unzip -q cmdline-tools.zip -d "$ANDROID_SDK_ROOT/cmdline-tools"
  - mv "$ANDROID_SDK_ROOT/cmdline-tools/cmdline-tools" "$ANDROID_SDK_ROOT/cmdline-tools/latest"

  # Accept licenses
  - yes | "$ANDROID_SDK_ROOT/cmdline-tools/latest/bin/sdkmanager" --sdk_root="$ANDROID_SDK_ROOT" --licenses

  # Install the exact SDK pieces your library needs (adjust to your project)
  - "$ANDROID_SDK_ROOT/cmdline-tools/latest/bin/sdkmanager" --sdk_root="$ANDROID_SDK_ROOT" \
      "platform-tools" \
      "platforms;android-35" \
      "build-tools;35.0.0" \
      "cmake;3.22.1" \
      "ndk;29.0.13846066"

  # Export NDK vars if you build native code
  - export ANDROID_NDK_ROOT="$ANDROID_SDK_ROOT/ndk/29.0.13846066"
  - export ANDROID_NDK_HOME="$ANDROID_NDK_ROOT"
  - export NDK_HOME="$ANDROID_NDK_ROOT"

